<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Policies & Procedures - ProSensia</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/responsive.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="../assets/images/logo.png" height="40" class="d-inline-block align-text-top">
                
            </a>
            
            <!-- Organization Switcher -->
            <div class="navbar-nav mx-3">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="orgDropdown" role="button" data-bs-toggle="dropdown">
                        <i class="fas fa-building me-1"></i>
                        <span id="current-org">ACMI Education</span>
                    </a>
                    <ul class="dropdown-menu" id="org-list">
                        <li><a class="dropdown-item active" href="#" data-org="acmi">ACMI Education</a></li>
                        <li><a class="dropdown-item" href="#" data-org="global">Global Skills Institute</a></li>
                        <li><a class="dropdown-item" href="#" data-org="metro">Metro College</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#addOrgModal"><i class="fas fa-plus me-1"></i>Add Organization</a></li>
                    </ul>
                </div>
            </div>

            <div class="d-flex align-items-center">
                <!-- Live Support -->
                <button class="btn btn-outline-light btn-sm me-2" id="liveSupport">
                    <i class="fas fa-headset me-1"></i> Live Support
                </button>

                <!-- Notifications -->
                <div class="dropdown me-3">
                    <button class="btn btn-outline-light btn-sm dropdown-toggle position-relative" type="button" id="notificationsDropdown" data-bs-toggle="dropdown">
                        <i class="fas fa-bell"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">5</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><h6 class="dropdown-header">Notifications</h6></li>
                        <li><a class="dropdown-item" href="#">Policy review due in 3 days</a></li>
                        <li><a class="dropdown-item" href="#">New ASQA standards available</a></li>
                        <li><a class="dropdown-item" href="#">Risk assessment overdue</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item text-center" href="#">View All</a></li>
                    </ul>
                </div>

                <!-- User Menu -->
                <div class="dropdown">
                    <button class="btn btn-outline-light btn-sm dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown">
                        <i class="fas fa-user-circle me-1"></i> John Doe (Admin)
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>Profile</a></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i>Settings</a></li>
                        <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#subscriptionModal"><i class="fas fa-crown me-2"></i>Subscription</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-2 sidebar bg-light">
                <div class="d-flex flex-column pt-3">
                    <div class="nav flex-column nav-pills me-3" id="v-pills-tab" role="tablist">
                        <a class="nav-link" href="../index.html">
                            <i class="fas fa-tachometer-alt me-2"></i> Overview
                        </a>
                        <a class="nav-link" href="standards.html">
                            <i class="fas fa-book me-2"></i> Standards
                        </a>
                        <a class="nav-link active" href="policies.html">
                            <i class="fas fa-file-contract me-2"></i> Policies
                        </a>
                        <a class="nav-link" href="registers.html">
                            <i class="fas fa-clipboard-list me-2"></i> Registers
                        </a>
                        <a class="nav-link" href="tasks.html">
                            <i class="fas fa-tasks me-2"></i> Tasks
                        </a>
                        <a class="nav-link" href="reports.html">
                            <i class="fas fa-chart-bar me-2"></i> Reports
                        </a>
                        <a class="nav-link" href="files.html">
                            <i class="fas fa-folder me-2"></i> Files
                        </a>
                        <a class="nav-link" href="team.html">
                            <i class="fas fa-folder me-2"></i> Team
                        </a>
                        <a class="nav-link" href="admin.html">
                            <i class="fas fa-cog me-2"></i> Admin
                        </a>
                    </div>

                    <!-- Trial Banner -->
                    <div class="alert alert-warning mt-4" id="trialBanner">
                        <small>
                            <i class="fas fa-crown me-1"></i>
                            <strong>Trial Period:</strong> 15 days remaining
                            <a href="#" class="alert-link" data-bs-toggle="modal"
                                data-bs-target="#subscriptionModal">Upgrade now</a>
                        </small>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-10 main-content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Policies & Procedures</h2>
                    <div class="btn-group">
                        <button class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#uploadPolicyModal">
                            <i class="fas fa-upload me-1"></i> Upload Policy
                        </button>
                        <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#createPolicyModal">
                            <i class="fas fa-plus me-1"></i> Create Policy
                        </button>
                    </div>
                </div>

                <!-- Policy Statistics -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <h3 class="text-primary">42</h3>
                                <p class="text-muted mb-0">Active Policies</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <h3 class="text-warning">5</h3>
                                <p class="text-muted mb-0">Pending Review</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <h3 class="text-danger">3</h3>
                                <p class="text-muted mb-0">Overdue</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <h3 class="text-success">87%</h3>
                                <p class="text-muted mb-0">Compliance Rate</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <!-- Policy Tree -->
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span>Policy Library</span>
                                <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#createFolderModal">
                                    <i class="fas fa-folder-plus"></i>
                                </button>
                            </div>
                            <div class="card-body file-structure">
                                <div class="folder" data-folder="academic">
                                    <i class="fas fa-folder"></i> Academic Policies
                                    <span class="badge bg-secondary float-end">12</span>
                                </div>
                                <div class="document" data-policy="assessment">
                                    <i class="fas fa-file-pdf"></i> Assessment Policy v2.3
                                </div>
                                <div class="document" data-policy="integrity">
                                    <i class="fas fa-file-pdf"></i> Academic Integrity Policy v1.5
                                </div>
                                
                                <div class="folder" data-folder="student">
                                    <i class="fas fa-folder"></i> Student Management
                                    <span class="badge bg-secondary float-end">8</span>
                                </div>
                                <div class="document" data-policy="conduct">
                                    <i class="fas fa-file-pdf"></i> Student Code of Conduct v3.1
                                </div>
                                <div class="document" data-policy="complaints">
                                    <i class="fas fa-file-pdf"></i> Complaints and Appeals Policy v2.0
                                </div>
                                
                                <div class="folder" data-folder="compliance">
                                    <i class="fas fa-folder"></i> Compliance
                                    <span class="badge bg-secondary float-end">15</span>
                                </div>
                                <div class="document" data-policy="privacy">
                                    <i class="fas fa-file-pdf"></i> Privacy Policy v4.2
                                </div>
                                <div class="document" data-policy="risk">
                                    <i class="fas fa-file-pdf"></i> Risk Management Policy v1.8
                                </div>
                            </div>
                        </div>

                        <!-- AI Policy Assistant -->
                        <div class="card mt-4">
                            <div class="card-header">
                                <i class="fas fa-robot me-2"></i>AI Policy Assistant
                            </div>
                            <div class="card-body">
                                <div class="alert alert-info">
                                    <h6>Policy Gap Detected</h6>
                                    <p class="small mb-2">Student Welfare policy needs update for new ASQA standards.</p>
                                    <button class="btn btn-sm btn-outline-primary">Create Update Task</button>
                                </div>
                                <div class="alert alert-warning mt-2">
                                    <h6>Review Schedule</h6>
                                    <p class="small mb-0">3 policies due for review in next 30 days.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Policy Details -->
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span>Assessment Policy v2.3</span>
                                <div class="btn-group">
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#versionHistoryModal">
                                        <i class="fas fa-history"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-warning">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <!-- Policy Metadata -->
                                <div class="row mb-4">
                                    <div class="col-md-6">
                                        <table class="table table-sm table-borderless">
                                            <tr>
                                                <td><strong>Policy ID:</strong></td>
                                                <td>POL-ACAD-002</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Category:</strong></td>
                                                <td>Academic Policies</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Owner:</strong></td>
                                                <td>Academic Director</td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-md-6">
                                        <table class="table table-sm table-borderless">
                                            <tr>
                                                <td><strong>Version:</strong></td>
                                                <td>v2.3</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Review Date:</strong></td>
                                                <td>15 Nov 2023</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Status:</strong></td>
                                                <td><span class="badge bg-success">Active</span></td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>

                                <!-- Policy Document Preview -->
                                <div class="policy-preview border rounded p-4 bg-light">
                                    <h4>Assessment Policy</h4>
                                    <p><strong>Version 2.3</strong> | <strong>Effective Date:</strong> 1 September 2023</p>
                                    
                                    <h5>1. Purpose</h5>
                                    <p>This policy outlines the principles and processes for assessment of student competency at ACMI, ensuring compliance with ASQA Standards for RTOs 2015 and the Australian Qualifications Framework.</p>
                                    
                                    <h5>2. Scope</h5>
                                    <p>This policy applies to all assessment activities conducted by ACMI for nationally recognized training packages and accredited courses.</p>
                                    
                                    <h5>3. Principles</h5>
                                    <p>Assessment at ACMI will be conducted in accordance with the Principles of Assessment and Rules of Evidence...</p>
                                    
                                    <h5>4. Roles and Responsibilities</h5>
                                    <p><strong>Trainers/Assessors</strong> are responsible for conducting fair, valid, and reliable assessments...</p>
                                    <p><strong>Academic Director</strong> is responsible for monitoring assessment practices and ensuring compliance...</p>
                                </div>

                                <!-- Review History -->
                                <div class="mt-4">
                                    <h6>Review History</h6>
                                    <div class="table-responsive">
                                        <table class="table table-sm">
                                            <thead>
                                                <tr>
                                                    <th>Version</th>
                                                    <th>Review Date</th>
                                                    <th>Reviewed By</th>
                                                    <th>Changes</th>
                                                    <th>Status</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>v2.3</td>
                                                    <td>15 Sep 2023</td>
                                                    <td>Sarah Johnson</td>
                                                    <td>Updated assessment methods</td>
                                                    <td><span class="badge bg-success">Approved</span></td>
                                                </tr>
                                                <tr>
                                                    <td>v2.2</td>
                                                    <td>20 Mar 2023</td>
                                                    <td>Michael Chen</td>
                                                    <td>Minor formatting changes</td>
                                                    <td><span class="badge bg-success">Approved</span></td>
                                                </tr>
                                                <tr>
                                                    <td>v2.1</td>
                                                    <td>10 Jan 2023</td>
                                                    <td>David Wilson</td>
                                                    <td>Compliance updates</td>
                                                    <td><span class="badge bg-success">Approved</span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="d-flex justify-content-between mt-4">
                                    <div>
                                        <button class="btn btn-success me-2">
                                            <i class="fas fa-check me-1"></i> Mark Reviewed
                                        </button>
                                        <button class="btn btn-outline-primary">
                                            <i class="fas fa-tasks me-1"></i> Create Review Task
                                        </button>
                                    </div>
                                    <button class="btn btn-outline-danger">
                                        <i class="fas fa-archive me-1"></i> Archive Policy
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Upload Policy Modal -->
    <div class="modal fade" id="uploadPolicyModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Upload Policy Document</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="uploadPolicyForm">
                        <div class="mb-3">
                            <label class="form-label">Select File</label>
                            <input type="file" class="form-control" accept=".pdf,.doc,.docx" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Policy Name</label>
                            <input type="text" class="form-control" placeholder="e.g., Assessment Policy" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Category</label>
                            <select class="form-select" required>
                                <option value="">Select Category</option>
                                <option value="academic">Academic Policies</option>
                                <option value="student">Student Management</option>
                                <option value="compliance">Compliance</option>
                                <option value="hr">HR & Staff</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Review Date</label>
                            <input type="date" class="form-control" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary">Upload Policy</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Policy Modal -->
    <div class="modal fade" id="createPolicyModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create New Policy</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="createPolicyForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Policy Title</label>
                                    <input type="text" class="form-control" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Policy Code</label>
                                    <input type="text" class="form-control" placeholder="e.g., POL-ACAD-001" required>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Category</label>
                            <select class="form-select" required>
                                <option value="">Select Category</option>
                                <option value="academic">Academic Policies</option>
                                <option value="student">Student Management</option>
                                <option value="compliance">Compliance</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Policy Owner</label>
                            <select class="form-select" required>
                                <option value="">Select Owner</option>
                                <option value="academic_director">Academic Director</option>
                                <option value="compliance_manager">Compliance Manager</option>
                                <option value="ceo">CEO</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Review Frequency</label>
                            <select class="form-select" required>
                                <option value="6">6 Months</option>
                                <option value="12" selected>12 Months</option>
                                <option value="24">24 Months</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Policy Content</label>
                            <textarea class="form-control" rows="10" placeholder="Enter policy content here..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary">Create Policy</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/app.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/tenant-management.js"></script>
    <script>
        // Policy management functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Folder click handlers
            document.querySelectorAll('.folder').forEach(folder => {
                folder.addEventListener('click', function() {
                    const folderName = this.dataset.folder;
                    loadFolderContents(folderName);
                });
            });

            // Document click handlers
            document.querySelectorAll('.document').forEach(doc => {
                doc.addEventListener('click', function() {
                    const policyId = this.dataset.policy;
                    loadPolicyDetails(policyId);
                });
            });

            function loadFolderContents(folderName) {
                // Simulate loading folder contents
                console.log('Loading folder:', folderName);
                // In real implementation, this would fetch policies from API
            }

            function loadPolicyDetails(policyId) {
                // Simulate loading policy details
                console.log('Loading policy:', policyId);
                // In real implementation, this would fetch policy details from API
            }
        });
    </script>
</body>
</html>